<!-- AI按钮在index.html中的代码 -->
<a href="#ai-overlay-trigger" id="ai-trigger" class="nav-link">AI</a>

<!-- iframe用于加载AI界面 -->
<iframe id="ai-frame" src="about:blank" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 10000; opacity: 0; transition: opacity 0.3s ease;"></iframe>

<!-- AI功能相关JavaScript函数 -->
<script>
// AI页面控制函数
function openAiOverlay() {
    const aiFrame = document.getElementById('ai-frame');
    aiFrame.src = "ai.html";
    aiFrame.style.display = "block";
    
    // 强制重排以确保过渡效果生效
    aiFrame.offsetHeight;
    
    // 淡入显示
    aiFrame.style.opacity = "1";
    
    // 禁用fullPage滚动
    if (typeof fullpage_api !== 'undefined') {
        fullpage_api.setAllowScrolling(false);
        fullpage_api.setKeyboardScrolling(false);
    }
    
    // 隐藏导航点
    const fpNav = document.getElementById('fp-nav');
    if (fpNav) {
        fpNav.style.display = 'none';
    }
}

function closeAiOverlay() {
    const aiFrame = document.getElementById('ai-frame');
    
    // 淡出效果
    aiFrame.style.opacity = "0";
    
    // 等待过渡效果完成后隐藏
    setTimeout(function() {
        aiFrame.style.display = "none";
        aiFrame.src = "about:blank";
    }, 300); // 等待时间与过渡时间一致
    
    // 恢复fullPage滚动
    if (typeof fullpage_api !== 'undefined') {
        fullpage_api.setAllowScrolling(true);
        fullpage_api.setKeyboardScrolling(true);
    }
    
    // 显示导航点
    const fpNav = document.getElementById('fp-nav');
    if (fpNav) fpNav.style.display = 'block';
}

// 页面加载后初始化
document.addEventListener('DOMContentLoaded', function() {
    // 绑定AI触发器事件
    const aiTrigger = document.getElementById('ai-trigger');
    if (aiTrigger) {
        aiTrigger.addEventListener('click', function(event) {
            event.preventDefault();
            openAiOverlay();
        });
    }
});
</script>