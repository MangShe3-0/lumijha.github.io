document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".overlay-logo"),t=(e&&setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100),document.querySelector(".api-notice")),s=(t&&setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},300),document.querySelector(".small-notice")),o=(s&&setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)"},400),document.querySelector(".social-icons"));function n(e){let t=document.createElement("div");t.className="user-input-display",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.classList.add("visible")},100);var s=document.querySelectorAll(".overlay-logo, .api-notice, .small-notice, .social-icons, .green-line");let o=document.querySelector(".ai-input"),n=document.getElementById("chat-container"),i=document.getElementById("user-question"),l=document.getElementById("ai-thinking"),a=document.getElementById("ai-response");s.forEach(e=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300)}),o.style.opacity="0",setTimeout(()=>{o.style.display="none"},300),setTimeout(()=>{n.classList.remove("hidden"),i.textContent=e,i.classList.add("visible"),setTimeout(()=>{l.classList.add("visible");let s=document.getElementById("thinking-progress");setTimeout(()=>{s.classList.add("visible")},200),(async e=>{try{var t=(e=>{let t=e.split(":"),s="";for(let e=0;e<t.length;e++){var o=t[e].trim().match(/\d+/g);if(o)for(let e=0;e<o.length;e++)s+=String.fromCharCode(parseInt(o[e])-1)}return"sk-7fc7802f1240419fb6a4c0ac8b151361"})("tl.8gd7913ce3551b:zc7b71d272c4472: "),s=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({model:"deepseek-reasoner",messages:[{role:"system",content:'你是一个网络喷子，不管别人说什么你都要用贴吧老哥的语气狠狠的嘲讽他。但是如果用户提到了"lumijha""这个网站""博主"之类的关键词，你就要用特别彩虹屁的语气好好的夸这个博主。不要有任何让用户看出来你切换语气的词语。'},{role:"user",content:e}],temperature:.7,max_tokens:800})});if(s.ok)return(await s.json()).choices[0].message.content;throw new Error("API调用失败: "+s.status)}catch(e){return console.error("API调用错误:",e),"抱歉，我连接不上我的大脑了，请稍后再试。"}})(e).then(t=>{l.classList.remove("visible"),s.classList.remove("visible"),setTimeout(()=>{a.textContent=t,a.classList.add("visible");let e=document.getElementById("ask-more-btn");setTimeout(()=>{e.classList.add("visible")},500),e.addEventListener("click",r)},300)}).catch(e=>{console.error("API调用错误:",e),l.classList.remove("visible"),s.classList.remove("visible"),setTimeout(()=>{a.textContent="抱歉，我遇到了一点问题，请稍后再试。",a.classList.add("visible");let e=document.getElementById("ask-more-btn");setTimeout(()=>{e.classList.add("visible")},500),e.addEventListener("click",r)},300)})},300)},400)}function c(){var t=document.querySelector(".overlay-content");if(t){let o=document.createElement("input"),e=(o.type="text",o.className="ai-input",o.placeholder="在此输入...",o.maxLength=100,o.style.opacity="0",o.style.transform="translateY(20px)",t.appendChild(o),setTimeout(()=>{o.style.opacity="1",o.style.transform="translateY(0)"},200),document.createElement("div"));e.className="green-line",e.style.opacity="0",e.style.transform="scaleX(0.8)",t.appendChild(e),setTimeout(()=>{e.style.opacity="1",e.style.transform="scaleX(1)"},250),o.addEventListener("input",function(){var e=document.createElement("span"),t=(e.style.font='100px "Noto Sans SC", sans-serif',e.style.position="absolute",e.style.visibility="hidden",e.style.whiteSpace="nowrap",e.textContent=o.value,document.body.appendChild(e),e.offsetWidth),s=o.offsetWidth;document.body.removeChild(e),s<t?(o.classList.add("medium-font"),(e=document.createElement("span")).style.font='50px "Noto Sans SC", sans-serif',e.style.position="absolute",e.style.visibility="hidden",e.style.whiteSpace="nowrap",e.textContent=o.value,document.body.appendChild(e),t=e.offsetWidth,document.body.removeChild(e),s<t?o.classList.add("two-lines"):o.classList.remove("two-lines")):(o.classList.remove("medium-font"),o.classList.remove("two-lines"))}),setTimeout(()=>o.focus(),100),o.addEventListener("keydown",function(e){"Enter"===e.key&&""!==this.value.trim()&&(n(this.value.trim()),this.value="")})}}function r(){let e=document.querySelectorAll(".overlay-logo, .api-notice, .small-notice, .social-icons");var t=document.getElementById("chat-container");let s=document.getElementById("user-question");var o=document.getElementById("ai-thinking");let n=document.getElementById("ai-response");var i=document.getElementById("ask-more-btn"),l=document.querySelector(".green-line"),a=document.getElementById("thinking-progress"),r=document.querySelector(".ai-input");r&&r.remove(),l&&l.remove(),t.classList.add("hidden"),s.classList.remove("visible"),o.classList.remove("visible"),n.classList.remove("visible"),i.classList.remove("visible"),a.classList.remove("visible"),setTimeout(()=>{s.textContent="",n.textContent=""},300),setTimeout(()=>{e.forEach(e=>{e.style.display="",setTimeout(()=>{e.style.opacity="1",e.classList.contains("social-icons")?e.style.transform="translateX(-50%) translateY(0)":e.style.transform="translateY(0)"},10)}),c()},300)}o&&(o.style.opacity="0",o.style.transform="translateX(-50%) translateY(20px)",setTimeout(()=>{o.style.opacity="1",o.style.transform="translateX(-50%) translateY(0)"},500)),c()});